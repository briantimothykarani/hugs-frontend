import{c as g,r as i,u as x,j as e}from"./index-QLpKP0Lq.js";import{u as b}from"./UseImagePreview-DmGAiiz0.js";import{a as u}from"./index-ngrFHoWO.js";function v(){const{values:m}=g(),[r,p]=i.useState(null),n=b(r),[l,c]=i.useState(""),f=x();i.useEffect(()=>{u.get("http://localhost:8000/api/csrf/",{withCredentials:!0}).then(()=>console.log("âœ… CSRF cookie set")).catch(a=>console.error("CSRF error:",a))},[]);const h=async a=>{var d;if(a.preventDefault(),r&&r.size>2e6){c("Image must be under 2MB.");return}const t=new FormData;Object.entries(m).forEach(([s,o])=>{t.append(s,o)}),r&&t.append("profile_pic",r);try{await u.post("http://localhost:8000/api/StudentApiListCreate/",t,{headers:{Authorization:`Bearer ${localStorage.getItem("access")}`,"Content-Type":"multipart/form-data"},withCredentials:!0}),f("/home")}catch(s){const o=(d=s==null?void 0:s.response)==null?void 0:d.data;c(typeof o=="object"?JSON.stringify(o):"Error submitting data")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-purple-600 to-indigo-800 p-6",children:e.jsxs("form",{onSubmit:h,className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full space-y-5",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-700 text-center",children:" Upload Profile Picture"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 font-medium text-gray-700",children:"Upload Profile Picture:"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var t;return p(((t=a.target.files)==null?void 0:t[0])??null)},className:"w-full"}),n&&e.jsx("img",{src:n,alt:"Preview",className:"mt-3 w-24 h-24 rounded-full object-cover border border-gray-300"})]}),l&&e.jsx("p",{className:"text-red-600 bg-red-100 p-2 rounded",children:l}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Submit"})]})})}export{v as default};
